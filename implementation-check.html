<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰¶é¤Šãƒ—ãƒ­ - å®Ÿè£…ç¢ºèªãƒšãƒ¼ã‚¸</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .check-item { margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        .ok { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .btn { background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
    </style>
</head>
<body>
    <h1>æ‰¶é¤Šãƒ—ãƒ­å®Ÿè£…ç¢ºèªãƒšãƒ¼ã‚¸ v1.2.0</h1>
    
    <h2>ğŸ“‹ å®Ÿè£…çŠ¶æ³ãƒã‚§ãƒƒã‚¯</h2>
    <div id="checkResults"></div>
    
    <h2>ğŸ”§ å¼·åˆ¶æ›´æ–°ãƒ†ã‚¹ãƒˆ</h2>
    <button class="btn" onclick="clearCache()">Service Workerã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢</button>
    <button class="btn" onclick="reloadApp()">ã‚¢ãƒ—ãƒªãƒªãƒ­ãƒ¼ãƒ‰</button>
    <button class="btn" onclick="checkMainApp()">ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªç¢ºèª</button>
    
    <script>
        // å®Ÿè£…ãƒã‚§ãƒƒã‚¯é–¢æ•°
        function checkImplementation() {
            const results = document.getElementById('checkResults');
            const checks = [];
            
            // ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã®HTMLã‚’å–å¾—ã—ã¦ç¢ºèª
            fetch('fuyou-pro-app.html')
                .then(response => response.text())
                .then(html => {
                    // é–¢æ•°å®Ÿè£…ãƒã‚§ãƒƒã‚¯
                    const functions = [
                        'enhanceTouchResponsiveness',
                        'initializeShiftBoardUX', 
                        'initializeDragAndDrop',
                        'showQuickActionMenu',
                        'showToast',
                        'moveShift'
                    ];
                    
                    functions.forEach(func => {
                        const exists = html.includes(`function ${func}`);
                        checks.push({
                            name: func,
                            status: exists,
                            message: exists ? 'âœ… å®Ÿè£…æ¸ˆã¿' : 'âŒ æœªå®Ÿè£…'
                        });
                    });
                    
                    // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯
                    const hasVersion = html.includes('v1.2.0');
                    checks.push({
                        name: 'ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡¨ç¤º',
                        status: hasVersion,
                        message: hasVersion ? 'âœ… v1.2.0è¡¨ç¤ºæ¸ˆã¿' : 'âŒ ãƒãƒ¼ã‚¸ãƒ§ãƒ³æœªæ›´æ–°'
                    });
                    
                    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒã‚§ãƒƒã‚¯
                    const hasCacheBusting = html.includes('Cache-Control');
                    checks.push({
                        name: 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚¹ãƒ†ã‚£ãƒ³ã‚°',
                        status: hasCacheBusting,
                        message: hasCacheBusting ? 'âœ… å®Ÿè£…æ¸ˆã¿' : 'âŒ æœªå®Ÿè£…'
                    });
                    
                    displayResults(checks);
                })
                .catch(error => {
                    results.innerHTML = '<div class="check-item error">âŒ ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã®å–å¾—ã«å¤±æ•—: ' + error.message + '</div>';
                });
        }
        
        function displayResults(checks) {
            const results = document.getElementById('checkResults');
            results.innerHTML = checks.map(check => 
                `<div class="check-item ${check.status ? 'ok' : 'error'}">
                    <strong>${check.name}</strong>: ${check.message}
                </div>`
            ).join('');
        }
        
        function clearCache() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistrations().then(registrations => {
                    registrations.forEach(registration => {
                        registration.unregister();
                    });
                });
                
                if ('caches' in window) {
                    caches.keys().then(names => {
                        names.forEach(name => {
                            caches.delete(name);
                        });
                    });
                }
                
                alert('âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚');
            }
        }
        
        function reloadApp() {
            window.location.reload(true);
        }
        
        function checkMainApp() {
            window.open('fuyou-pro-app.html', '_blank');
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«è‡ªå‹•ãƒã‚§ãƒƒã‚¯
        window.onload = checkImplementation;
    </script>
    
    <h2>ğŸ“± å‹•ä½œç¢ºèªç”¨ãƒªãƒ³ã‚¯</h2>
    <p><a href="fuyou-pro-app.html" target="_blank">ğŸ“± ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚’é–‹ã</a></p>
    <p><a href="https://junp1ayer.github.io/fuyou/fuyou-pro-app.html" target="_blank">ğŸŒ GitHub Pagesç‰ˆã‚’é–‹ã</a></p>
    
    <h2>ğŸ” ç¢ºèªæ‰‹é †</h2>
    <ol>
        <li>ã€ŒService Workerã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ã€ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
        <li>ãƒ–ãƒ©ã‚¦ã‚¶ã§Ctrl+F5ã§å¼·åˆ¶æ›´æ–°</li>
        <li>ã€Œãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªç¢ºèªã€ã§ã‚¢ãƒ—ãƒªã‚’é–‹ã</li>
        <li>é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ï¼ˆF12ï¼‰â†’ Consoleã§ä»¥ä¸‹ã‚’ç¢ºèª:
            <ul>
                <li>ã€ŒğŸš€ æ‰¶é¤Šãƒ—ãƒ­åˆæœŸåŒ–é–‹å§‹...ã€</li>
                <li>ã€ŒğŸ“± ã‚¿ãƒƒãƒåå¿œæ€§ã‚’å¼·åŒ–ä¸­...ã€</li>
                <li>ã€ŒğŸ“‹ ã‚·ãƒ•ãƒˆãƒœãƒ¼ãƒ‰ãƒ©ã‚¤ã‚¯UXã‚’åˆæœŸåŒ–ä¸­...ã€</li>
                <li>ã€Œâœ… æ‰¶é¤Šãƒ—ãƒ­åˆæœŸåŒ–å®Œäº†ï¼ã€</li>
            </ul>
        </li>
        <li>ã‚¿ãƒƒãƒæ“ä½œãƒ†ã‚¹ãƒˆ:
            <ul>
                <li>ã‚¿ãƒ–ã‚’ã‚¿ãƒƒãƒ—ã—ã¦åå¿œç¢ºèª</li>
                <li>å·¦å³ã‚¹ãƒ¯ã‚¤ãƒ—ã§ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ</li>
                <li>ãƒœã‚¿ãƒ³é•·æŠ¼ã—ï¼ˆ0.5ç§’ï¼‰ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤º</li>
            </ul>
        </li>
    </ol>
</body>
</html>