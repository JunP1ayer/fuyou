<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ§  Perfectæ‰¶é¤Šã‚·ãƒ•ãƒˆãƒœãƒ¼ãƒ‰ - Gemini Ultraè¨­è¨ˆ</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script crossorigin src="https://unpkg.com/@mui/material@5.15.20/umd/material-ui.development.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <style>
      body {
        margin: 0;
        font-family: 'Roboto', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }
      
      /* ğŸ¯ Gemini Ultraè¨­è¨ˆï¼šæ‰¶é¤Šã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆãƒãƒƒãƒã‚·ã‚¹ãƒ†ãƒ  */
      .fuyou-pot {
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 8px;
        font-weight: bold;
        color: white;
        text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        transition: all 0.3s ease;
        position: relative;
        margin: 1px;
      }
      
      .fuyou-pot.safe {
        background: linear-gradient(45deg, #2E7D32, #4CAF50);
        box-shadow: 0 0 8px rgba(76, 175, 80, 0.3);
      }
      
      .fuyou-pot.safe::after { content: "âœ“"; }
      
      .fuyou-pot.warning {
        background: linear-gradient(45deg, #F57C00, #FF9800);
        box-shadow: 0 0 8px rgba(255, 152, 0, 0.4);
        animation: pulse-warning 2s infinite;
      }
      
      .fuyou-pot.warning::after { content: "!"; }
      
      .fuyou-pot.danger {
        background: linear-gradient(45deg, #C62828, #F44336);
        box-shadow: 0 0 12px rgba(244, 67, 54, 0.5);
        animation: pulse-danger 1s infinite;
      }
      
      .fuyou-pot.danger::after { content: "âš "; }
      
      @keyframes pulse-warning {
        0%, 100% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.1); opacity: 0.8; }
      }
      
      @keyframes pulse-danger {
        0%, 100% { transform: scale(1); opacity: 1; }
        25% { transform: scale(1.15); opacity: 0.9; }
        50% { transform: scale(1.05); opacity: 1; }
        75% { transform: scale(1.15); opacity: 0.9; }
      }
      
      @keyframes sparkle {
        0% { transform: scale(0) rotate(0deg); opacity: 0; }
        50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
        100% { transform: scale(1) rotate(360deg); opacity: 1; }
      }
      
      /* ğŸš€ ã‚·ãƒ•ãƒˆãƒœãƒ¼ãƒ‰å®Œå…¨å†ç¾ï¼šæ—¥ä»˜ã‚»ãƒ« */
      .shift-cell {
        transition: all 0.15s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        min-height: 90px;
        border-radius: 8px;
      }
      
      .shift-cell:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0,0,0,0.15);
      }
      
      .shift-cell.today {
        border: 3px solid #2196F3;
        background: linear-gradient(45deg, #E3F2FD 30%, #BBDEFB 90%);
      }
      
      /* ğŸ“Š Geminiè¨­è¨ˆï¼šæ‰¶é¤Šãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */
      .fuyou-progress {
        height: 24px;
        border-radius: 12px;
        background: linear-gradient(90deg, #E8F5E8 0%, #FFE8E8 100%);
        position: relative;
        overflow: hidden;
      }
      
      .fuyou-progress-bar {
        height: 100%;
        border-radius: 12px;
        transition: all 0.8s ease-in-out;
        position: relative;
      }
      
      .fuyou-progress-bar.safe {
        background: linear-gradient(90deg, #4CAF50, #66BB6A);
      }
      
      .fuyou-progress-bar.warning {
        background: linear-gradient(90deg, #FF9800, #FFB74D);
      }
      
      .fuyou-progress-bar.danger {
        background: linear-gradient(90deg, #F44336, #EF5350);
      }
      
      .fuyou-progress-text {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-weight: bold;
        color: white;
        text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        font-size: 14px;
      }
      
      /* ğŸ§  AIæ€è€ƒå¯è¦–åŒ– */
      .ai-thinking {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        padding: 16px;
        border-radius: 12px;
        margin-bottom: 16px;
        animation: slideIn 0.5s ease-out;
      }
      
      @keyframes slideIn {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      
      /* ğŸ’¡ ã‚¹ãƒãƒ¼ãƒˆææ¡ˆãƒãƒŠãƒ¼ */
      .smart-suggestion {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        padding: 12px 16px;
        border-radius: 8px;
        margin: 8px 0;
        animation: slideIn 0.3s ease;
        border-left: 4px solid #FFF;
      }
      
      /* ğŸ¨ ã‚·ãƒ•ãƒˆãƒœãƒ¼ãƒ‰é¢¨ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ */
      .shift-block {
        padding: 4px 6px;
        margin: 2px 0;
        border-radius: 4px;
        font-size: 10px;
        font-weight: 500;
        color: white;
        text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        cursor: pointer;
        transition: all 0.15s ease;
        min-height: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        line-height: 1.2;
      }
      
      .shift-block:hover {
        filter: brightness(1.1);
        transform: scale(1.02);
      }
      
      .convenience { background: linear-gradient(45deg, #FF6B6B, #ee5a52); }
      .restaurant { background: linear-gradient(45deg, #4ECDC4, #44A08D); }
      .cafe { background: linear-gradient(45deg, #45B7D1, #96C93D); }
      .retail { background: linear-gradient(45deg, #F093FB, #F5576C); }
      .office { background: linear-gradient(45deg, #4facfe, #00f2fe); }
      .other { background: linear-gradient(45deg, #a8edea, #fed6e3); }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useCallback, useRef } = React;
      const {
        Box,
        Card,
        CardContent,
        Typography,
        Grid,
        Paper,
        Alert,
        LinearProgress,
        Container,
        ThemeProvider,
        createTheme,
        CssBaseline,
        CircularProgress,
        Button,
        Dialog,
        DialogContent,
        DialogTitle,
        Chip,
        Fade,
        Grow,
      } = MaterialUI;

      // ğŸ§  Gemini Ultraæ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆå®Œå…¨ç‰ˆï¼‰
      const GeminiUltraThink = {
        analyzeFuyouRisk: (shifts, currentEarnings, limit) => {
          const totalNewEarnings = shifts.reduce((sum, shift) => sum + (shift.earnings || 0), 0);
          const projectedTotal = currentEarnings + totalNewEarnings;
          const riskLevel = projectedTotal / limit;
          
          if (riskLevel > 1.0) {
            return {
              level: 'danger',
              message: `ğŸš¨ æ‰¶é¤Šé™åº¦é¡è¶…éï¼${(projectedTotal - limit).toLocaleString()}å††ã‚ªãƒ¼ãƒãƒ¼`,
              suggestion: 'ä¸€éƒ¨ã‚·ãƒ•ãƒˆã‚’å‰Šæ¸›ã™ã‚‹ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™',
              color: '#F44336',
              remaining: 0,
              overageAmount: projectedTotal - limit
            };
          } else if (riskLevel > 0.9) {
            return {
              level: 'warning',
              message: `âš ï¸ æ‰¶é¤Šé™åº¦é¡ã¾ã§æ®‹ã‚Š${(limit - projectedTotal).toLocaleString()}å††`,
              suggestion: 'ã“ã‚Œä»¥ä¸Šã®ã‚·ãƒ•ãƒˆè¿½åŠ ã¯å±é™ºã§ã™',
              color: '#FF9800',
              remaining: limit - projectedTotal
            };
          } else if (riskLevel > 0.7) {
            return {
              level: 'caution',
              message: `ğŸ“Š æ‰¶é¤Šä½¿ç”¨ç‡${Math.round(riskLevel * 100)}% - æ³¨æ„ãŒå¿…è¦`,
              suggestion: 'æœˆæœ«ã¾ã§æ…é‡ã«ã‚·ãƒ•ãƒˆã‚’èª¿æ•´ã—ã¦ãã ã•ã„',
              color: '#2196f3',
              remaining: limit - projectedTotal
            };
          } else {
            return {
              level: 'safe',
              message: `âœ… æ‰¶é¤Šå†…å®‰å…¨ - æ®‹ã‚Š${(limit - projectedTotal).toLocaleString()}å††`,
              suggestion: `ã‚ã¨${Math.floor((limit - projectedTotal) / 1000)}æ™‚é–“ç¨‹åº¦åƒã‘ã¾ã™`,
              color: '#4CAF50',
              remaining: limit - projectedTotal
            };
          }
        },

        generateOptimization: (shifts, hourlyWage, fuyouLimit) => {
          const suggestions = [];
          
          const highEarningShifts = shifts.filter(s => s.earnings > hourlyWage * 6);
          if (highEarningShifts.length > 0) {
            suggestions.push({
              type: 'optimize',
              text: `ğŸ’¡ ${highEarningShifts.length}å€‹ã®é«˜åå…¥ã‚·ãƒ•ãƒˆã‚’å„ªå…ˆçš„ã«ç¢ºä¿ã—ã¾ã—ã‚‡ã†`,
              action: 'highlight-profitable'
            });
          }

          const totalEarnings = shifts.reduce((sum, s) => sum + s.earnings, 0);
          const remaining = fuyouLimit - totalEarnings;
          if (remaining > 0 && remaining < hourlyWage * 10) {
            suggestions.push({
              type: 'maximize',
              text: `ğŸ¯ ã‚ã¨${Math.floor(remaining / hourlyWage)}æ™‚é–“åƒã‘ã°æ‰¶é¤Šé™åº¦é¡ã«åˆ°é”`,
              action: 'suggest-shifts'
            });
          }

          return suggestions;
        },

        calculatePotSize: (dailyEarnings, maxDailyTarget) => {
          const baseSize = 16;
          const maxSize = 28;
          const ratio = Math.min(dailyEarnings / maxDailyTarget, 1);
          return baseSize + (maxSize - baseSize) * ratio;
        },

        calculateFuyouImpact: (dailyEarnings, currentTotal, yearlyLimit) => {
          const remainingBudget = yearlyLimit - currentTotal;
          const impactRatio = dailyEarnings / remainingBudget;
          
          if (impactRatio < 0.01) return 'safe';
          if (impactRatio < 0.05) return 'warning';
          return 'danger';
        }
      };

      // ğŸ¯ æ‰¶é¤Šã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆãƒãƒƒãƒ
      const FuyouImpactPot = ({ earnings, impact, size }) => {
        return (
          <Box
            className={`fuyou-pot ${impact}`}
            sx={{
              width: size,
              height: size,
              fontSize: Math.max(6, size * 0.3),
              animation: impact === 'danger' ? 'pulse-danger 1s infinite' : 
                        impact === 'warning' ? 'pulse-warning 2s infinite' : 'none'
            }}
          />
        );
      };

      // ğŸ“Š æ‰¶é¤Šãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ã‚²ãƒ¼ã‚¸ï¼ˆGeminiè¨­è¨ˆï¼‰
      const FuyouProgressGauge = ({ current, limit, animated = true }) => {
        const percentage = Math.min((current / limit) * 100, 100);
        const riskLevel = percentage > 100 ? 'danger' : percentage > 90 ? 'warning' : 'safe';
        
        return (
          <Box position="relative" className="fuyou-progress">
            <Box
              className={`fuyou-progress-bar ${riskLevel}`}
              sx={{
                width: `${percentage}%`,
                transition: animated ? 'width 0.8s ease-in-out' : 'none'
              }}
            />
            
            {/* å±é™ºã‚¾ãƒ¼ãƒ³è¡¨ç¤º */}
            <Box 
              position="absolute" 
              right="10%" 
              top={0} 
              height="100%"
              width="2px"
              bgcolor="error.main"
              sx={{ opacity: 0.7 }}
            />
            
            <Typography className="fuyou-progress-text">
              {percentage.toFixed(1)}%
            </Typography>
          </Box>
        );
      };

      // ğŸ§  AIæ€è€ƒå¯è¦–åŒ–ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼
      const GeminiThinkingIndicator = ({ isThinking, stage = 0 }) => {
        const thinkingStages = [
          { text: 'ğŸ“Š åå…¥ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æä¸­...', duration: 1000 },
          { text: 'ğŸ§® æ‰¶é¤Šé™åº¦é¡ã¸ã®å½±éŸ¿ã‚’è¨ˆç®—ä¸­...', duration: 1200 },
          { text: 'ğŸ’¡ æœ€é©åŒ–æ¡ˆã‚’ç”Ÿæˆä¸­...', duration: 800 },
          { text: 'âœ… åˆ†æå®Œäº†ï¼ææ¡ˆã‚’æº–å‚™ä¸­...', duration: 500 }
        ];
        
        if (!isThinking) return null;
        
        return (
          <Fade in={isThinking}>
            <Box className="ai-thinking">
              <Box display="flex" alignItems="center" gap={2}>
                <CircularProgress size={20} sx={{ color: 'white' }} />
                <Typography variant="body2" sx={{ fontWeight: 'bold' }}>
                  ğŸ§  Gemini Ultraæ€è€ƒä¸­...
                </Typography>
              </Box>
              
              <Typography variant="caption" sx={{ mt: 1, display: 'block' }}>
                {thinkingStages[stage]?.text || 'åˆ†æä¸­...'}
              </Typography>
              
              <LinearProgress 
                variant="determinate" 
                value={(stage + 1) / thinkingStages.length * 100}
                sx={{ 
                  mt: 1, 
                  height: 4,
                  backgroundColor: 'rgba(255,255,255,0.3)',
                  '& .MuiLinearProgress-bar': {
                    backgroundColor: 'white'
                  }
                }}
              />
            </Box>
          </Fade>
        );
      };

      // ğŸ’¡ ã‚¹ãƒãƒ¼ãƒˆææ¡ˆè¡¨ç¤º
      const SmartSuggestion = ({ suggestion, onAccept }) => {
        return (
          <Grow in={true}>
            <Box className="smart-suggestion">
              <Typography variant="body2" sx={{ fontWeight: 'bold' }}>
                ğŸ§  Geminiåˆ†æ: {suggestion.text}
              </Typography>
              {onAccept && (
                <Button 
                  size="small" 
                  sx={{ mt: 1, color: 'white', borderColor: 'white' }}
                  variant="outlined"
                  onClick={() => onAccept(suggestion)}
                >
                  ææ¡ˆã‚’é©ç”¨
                </Button>
              )}
            </Box>
          </Grow>
        );
      };

      // ğŸš¨ å±é™ºã‚¾ãƒ¼ãƒ³ã‚¢ãƒ©ãƒ¼ãƒˆ
      const DangerZoneAlert = ({ analysis }) => {
        if (!analysis || analysis.level === 'safe') return null;
        
        const severity = analysis.level === 'danger' ? 'error' : 'warning';
        
        return (
          <Alert 
            severity={severity} 
            sx={{ 
              mb: 2,
              animation: 'slideIn 0.5s ease-out'
            }}
          >
            <Typography variant="h6" sx={{ fontWeight: 'bold' }}>
              {analysis.message}
            </Typography>
            <Typography variant="body2">{analysis.suggestion}</Typography>
          </Alert>
        );
      };

      // ğŸ“… ã‚·ãƒ•ãƒˆãƒœãƒ¼ãƒ‰å®Œå…¨å†ç¾ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
      const PerfectShiftBoardCalendar = ({ shifts, onShiftUpdate, fuyouAnalysis }) => {
        const today = new Date();
        const currentMonth = today.getMonth();
        const currentYear = today.getFullYear();
        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
        const firstDayOfWeek = new Date(currentYear, currentMonth, 1).getDay();

        const weekDays = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];
        const calendarDays = [];

        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ—¥ä»˜ç”Ÿæˆ
        for (let i = 0; i < firstDayOfWeek; i++) {
          calendarDays.push(null);
        }
        for (let day = 1; day <= daysInMonth; day++) {
          calendarDays.push(day);
        }

        const getShiftsForDay = (day) => {
          if (!day) return [];
          const dateStr = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
          return shifts.filter(shift => shift.date === dateStr);
        };

        const getWorkplaceClass = (workplace) => {
          const mapping = {
            'ã‚³ãƒ³ãƒ“ãƒ‹': 'convenience',
            'ãƒ•ã‚¡ãƒŸãƒ¬ã‚¹': 'restaurant', 
            'ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³': 'restaurant',
            'ã‚«ãƒ•ã‚§': 'cafe',
            'å°å£²': 'retail',
            'ã‚ªãƒ•ã‚£ã‚¹': 'office'
          };
          return mapping[workplace] || 'other';
        };

        return (
          <Card>
            <CardContent>
              <Typography variant="h6" gutterBottom sx={{ 
                display: 'flex', 
                alignItems: 'center', 
                gap: 1,
                fontWeight: 'bold'
              }}>
                <span className="material-icons">schedule</span>
                ğŸ§  Perfectæ‰¶é¤Šã‚·ãƒ•ãƒˆãƒœãƒ¼ãƒ‰ - {currentYear}å¹´{currentMonth + 1}æœˆ
              </Typography>

              {/* æ›œæ—¥ãƒ˜ãƒƒãƒ€ãƒ¼ */}
              <Grid container spacing={0.5} sx={{ mb: 1 }}>
                {weekDays.map((day, index) => (
                  <Grid item xs key={index}>
                    <Box
                      textAlign="center"
                      py={1}
                      sx={{
                        fontWeight: 'bold',
                        fontSize: '12px',
                        color: index === 0 ? '#f44336' : index === 6 ? '#2196f3' : '#333',
                        background: 'linear-gradient(45deg, #f5f5f5 30%, #e0e0e0 90%)',
                        borderRadius: 1,
                      }}
                    >
                      {day}
                    </Box>
                  </Grid>
                ))}
              </Grid>

              {/* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚°ãƒªãƒƒãƒ‰ */}
              <Grid container spacing={0.5}>
                {calendarDays.map((day, index) => {
                  const dayShifts = getShiftsForDay(day);
                  const isToday = day === today.getDate();
                  const totalEarnings = dayShifts.reduce((sum, shift) => sum + (shift.earnings || 0), 0);
                  const fuyouImpact = totalEarnings > 0 ? 
                    GeminiUltraThink.calculateFuyouImpact(totalEarnings, 850000, 1030000) : null;
                  const potSize = totalEarnings > 0 ? 
                    GeminiUltraThink.calculatePotSize(totalEarnings, 10000) : 0;
                  
                  return (
                    <Grid item xs key={index}>
                      <Paper
                        className={`shift-cell ${isToday ? 'today' : ''}`}
                        elevation={isToday ? 4 : 1}
                        sx={{
                          cursor: day ? 'pointer' : 'default',
                          background: day ? (isToday ? 'linear-gradient(45deg, #E3F2FD 30%, #BBDEFB 90%)' : '#fff') : '#f5f5f5',
                          opacity: day ? 1 : 0.3,
                        }}
                      >
                        {day && (
                          <Box p={0.5} sx={{ height: '100%', position: 'relative' }}>
                            {/* æ—¥ä»˜ */}
                            <Box display="flex" justifyContent="space-between" alignItems="center">
                              <Typography
                                variant="caption"
                                sx={{
                                  fontWeight: isToday ? 'bold' : 'normal',
                                  color: isToday ? '#2196F3' : '#333',
                                  fontSize: '11px'
                                }}
                              >
                                {day}
                              </Typography>
                              
                              {/* æ‰¶é¤Šã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆãƒãƒƒãƒ */}
                              {fuyouImpact && (
                                <FuyouImpactPot 
                                  earnings={totalEarnings}
                                  impact={fuyouImpact}
                                  size={potSize}
                                />
                              )}
                            </Box>

                            {/* ã‚·ãƒ•ãƒˆãƒ–ãƒ­ãƒƒã‚¯ */}
                            <Box sx={{ mt: 0.5 }}>
                              {dayShifts.slice(0, 3).map((shift, idx) => (
                                <Box
                                  key={idx}
                                  className={`shift-block ${getWorkplaceClass(shift.workplace)}`}
                                >
                                  <Typography variant="caption" sx={{ fontSize: '9px', lineHeight: 1 }}>
                                    {shift.startTime}-{shift.endTime}
                                  </Typography>
                                </Box>
                              ))}
                              
                              {dayShifts.length > 3 && (
                                <Typography variant="caption" sx={{ fontSize: '8px', color: '#666' }}>
                                  +{dayShifts.length - 3} more
                                </Typography>
                              )}
                            </Box>

                            {/* æ—¥åè¡¨ç¤º */}
                            {totalEarnings > 0 && (
                              <Typography 
                                variant="caption" 
                                sx={{ 
                                  fontSize: '8px', 
                                  fontWeight: 'bold',
                                  color: fuyouImpact === 'danger' ? '#f44336' : 
                                         fuyouImpact === 'warning' ? '#ff9800' : '#4caf50',
                                  display: 'block',
                                  textAlign: 'center',
                                  mt: 0.5
                                }}
                              >
                                Â¥{totalEarnings.toLocaleString()}
                              </Typography>
                            )}
                          </Box>
                        )}
                      </Paper>
                    </Grid>
                  );
                })}
              </Grid>
            </CardContent>
          </Card>
        );
      };

      // ğŸ† ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªï¼šShiftBoardFuyouMaster
      const ShiftBoardFuyouMaster = () => {
        const [shifts, setShifts] = useState([
          {
            id: 1,
            date: '2025-07-15',
            startTime: '10:00',
            endTime: '18:00',
            workplace: 'ã‚³ãƒ³ãƒ“ãƒ‹',
            earnings: 8000,
          },
          {
            id: 2,
            date: '2025-07-18',
            startTime: '14:00',
            endTime: '22:00',
            workplace: 'ãƒ•ã‚¡ãƒŸãƒ¬ã‚¹',
            earnings: 8000,
          },
          {
            id: 3,
            date: '2025-07-20',
            startTime: '09:00',
            endTime: '17:00',
            workplace: 'ã‚«ãƒ•ã‚§',
            earnings: 8000,
          },
          {
            id: 4,
            date: '2025-07-22',
            startTime: '13:00',
            endTime: '21:00',
            workplace: 'ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³',
            earnings: 9000,
          },
        ]);

        const [fuyouStatus, setFuyouStatus] = useState({
          currentEarnings: 850000,
          limit: 1030000,
        });

        const [isAIThinking, setIsAIThinking] = useState(false);
        const [thinkingStage, setThinkingStage] = useState(0);
        const [fuyouAnalysis, setFuyouAnalysis] = useState(null);
        const [smartSuggestions, setSmartSuggestions] = useState([]);

        // Gemini Ultraæ€è€ƒãƒˆãƒªã‚¬ãƒ¼
        const triggerAIAnalysis = useCallback(async (updatedShifts) => {
          setIsAIThinking(true);
          setThinkingStage(0);
          
          // æ®µéšçš„æ€è€ƒã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
          for (let stage = 0; stage < 4; stage++) {
            setThinkingStage(stage);
            await new Promise(resolve => setTimeout(resolve, [1000, 1200, 800, 500][stage]));
          }
          
          const analysis = GeminiUltraThink.analyzeFuyouRisk(
            updatedShifts, 
            fuyouStatus.currentEarnings, 
            fuyouStatus.limit
          );
          
          const optimizations = GeminiUltraThink.generateOptimization(
            updatedShifts,
            1000,
            fuyouStatus.limit
          );
          
          setFuyouAnalysis(analysis);
          setSmartSuggestions(optimizations);
          setIsAIThinking(false);
        }, [fuyouStatus]);

        // åˆå›åˆ†æ
        useEffect(() => {
          triggerAIAnalysis(shifts);
        }, []);

        const handleShiftUpdate = useCallback((updatedShifts) => {
          setShifts(updatedShifts);
          triggerAIAnalysis(updatedShifts);
        }, [triggerAIAnalysis]);

        const currentEarnings = fuyouStatus.currentEarnings + 
          shifts.reduce((sum, shift) => sum + shift.earnings, 0);

        return (
          <Container maxWidth="xl" sx={{ py: 2 }}>
            {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
            <Box sx={{ mb: 3, textAlign: 'center' }}>
              <Typography variant="h4" gutterBottom sx={{ 
                fontWeight: 'bold',
                background: 'linear-gradient(45deg, #667eea, #764ba2)',
                WebkitBackgroundClip: 'text',
                WebkitTextFillColor: 'transparent',
              }}>
                ğŸ§  Perfectæ‰¶é¤Šã‚·ãƒ•ãƒˆãƒœãƒ¼ãƒ‰
              </Typography>
              <Typography variant="subtitle1" sx={{ color: 'white', opacity: 0.9 }}>
                Gemini Ultraè¨­è¨ˆ Ã— ã‚·ãƒ•ãƒˆãƒœãƒ¼ãƒ‰å®Œå…¨å†ç¾ Ã— æ‰¶é¤Šç®¡ç†ç‰¹åŒ–
              </Typography>
            </Box>

            {/* AIæ€è€ƒå¯è¦–åŒ– */}
            <GeminiThinkingIndicator 
              isThinking={isAIThinking}
              stage={thinkingStage}
            />

            {/* æ‰¶é¤Šãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ */}
            <Card sx={{ mb: 2 }}>
              <CardContent>
                <Typography variant="h6" gutterBottom>
                  ğŸ“Š æ‰¶é¤Šãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
                </Typography>
                
                <FuyouProgressGauge 
                  current={currentEarnings}
                  limit={fuyouStatus.limit}
                  animated={!isAIThinking}
                />
                
                <Box sx={{ display: 'flex', justifyContent: 'space-between', mt: 2 }}>
                  <Typography variant="body2">
                    ç¾åœ¨: {currentEarnings.toLocaleString()}å††
                  </Typography>
                  <Typography variant="body2">
                    é™åº¦é¡: {fuyouStatus.limit.toLocaleString()}å††
                  </Typography>
                </Box>
              </CardContent>
            </Card>

            {/* å±é™ºã‚¾ãƒ¼ãƒ³ã‚¢ãƒ©ãƒ¼ãƒˆ */}
            <DangerZoneAlert analysis={fuyouAnalysis} />

            {/* ã‚¹ãƒãƒ¼ãƒˆææ¡ˆ */}
            {smartSuggestions.map((suggestion, index) => (
              <SmartSuggestion 
                key={index}
                suggestion={suggestion}
                onAccept={(suggestion) => {
                  console.log('ææ¡ˆå—ã‘å…¥ã‚Œ:', suggestion);
                }}
              />
            ))}

            {/* ã‚·ãƒ•ãƒˆãƒœãƒ¼ãƒ‰å®Œå…¨å†ç¾ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ */}
            <PerfectShiftBoardCalendar
              shifts={shifts}
              onShiftUpdate={handleShiftUpdate}
              fuyouAnalysis={fuyouAnalysis}
            />

            {/* Geminiæ€è€ƒçŠ¶æ…‹è¡¨ç¤º */}
            <Box sx={{ mt: 2, textAlign: 'center' }}>
              <Typography variant="caption" sx={{ 
                background: 'linear-gradient(45deg, #667eea, #764ba2)',
                WebkitBackgroundClip: 'text',
                WebkitTextFillColor: 'transparent',
                fontWeight: 'bold'
              }}>
                ğŸ§  Gemini Ultraæ€è€ƒã‚¨ãƒ³ã‚¸ãƒ³ç¨¼åƒä¸­ - ã‚·ãƒ•ãƒˆãƒœãƒ¼ãƒ‰ç´šæ“ä½œæ„Ÿ Ã— æ‰¶é¤Šç®¡ç†å®Œå…¨ç‰¹åŒ–
              </Typography>
            </Box>
          </Container>
        );
      };

      // ãƒ†ãƒ¼ãƒã¨ãƒ«ãƒ¼ãƒˆã‚¢ãƒ—ãƒª
      const theme = createTheme({
        palette: {
          primary: { main: '#667eea' },
          secondary: { main: '#764ba2' },
        },
      });

      const App = () => (
        <ThemeProvider theme={theme}>
          <CssBaseline />
          <ShiftBoardFuyouMaster />
        </ThemeProvider>
      );

      ReactDOM.render(<App />, document.getElementById('root'));
    </script>
  </body>
</html>